<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Dx2 真女神轉生 Liberation 二身合體 / Dx2 真女神転生 リベレーション 二身合体 / Dx2 Megamitensei Normal Fusion">
    <meta name="keywords" content="女神転生, メガテン, リベレーション, 合体, 女神轉生, 合體, Megamitensei, Megaten, Dx2, Liberation, Fusion, Simulator">
    <link rel="icon" href="images/theme/favicon.ico">
    <title>Dx2 二身合体</title>
    <link type="text/css" rel="stylesheet" href="css/bootstrap.min.css"/>
    <link type="text/css" rel="stylesheet" href="css/bootstrap-vue.min.css"/>
    <style>
    [v-cloak] {
      display: none;
    }
    </style>
    <script src="js/vue.min.js"></script>
    <script src="js/bootstrap-vue.min.js"></script>
    <script src="js/vue-i18n.min.js"></script>
    
</head>

<body>

    <!--Main-->
    <div class="container px-0" id="app" v-cloak>

        <b-card no-body>
            <b-tabs card v-model="tabIndex" content-class="p-2">

                <!--tab1-->

                <b-tab :title="$t('message.devil')" no-body>
                    
                    <b-form-input v-model="keyword" type="text" :placeholder="$t('message.search')"></b-form-input>

                    <b-card no-body v-show="keyword==''" class="mt-2">
                        <b-tabs pills card content-class="">
                            <b-tab :title="getRaceName(race)" v-for="race in races" no-body>
                            
                                <devil-list :devils="race.devils"></devil-list>

                            </b-tab>
                        </b-tabs>
                    </b-card>

                    <b-card no-body v-show="keyword">
                        
                        <devil-list :devils="filtered_devil_data"></devil-list>

                    </b-card>

                </b-tab>

                <!--tab2-->
                
                <b-tab :title="$t('message.reverse')" no-body>
                    
                    <b-card no-body v-if="master">
                         
                        <b-card-header class="p-0">

                            <div class="row no-gutters">
                                <div class="col-6 col-md-4 col-lg-3 p-2" v-for="(devil, idx) in queue" >
    
                                    <b-card no-body>
                                        <b-card-body class="p-2" @click="preview(idx)"
                                            :class="{'border-primary':idx==queue.length-1,'text-primary':idx==queue.length-1}"
                                            :style="{backgroundImage:'url(\'images/devil/'+devil.icon+'\')'}" 
                                            style="cursor:pointer;background-position:right;background-repeat:no-repeat;background-size:contain">
                                            <div class="font-weight-bold">
                                                {{ getDevilName( devil ) }}
                                            </div>
                                            <div class="small">
                                                {{ 'G.'+devil.grade }}
                                                <span v-for="n in devil.rarity">&#9733;</span>
                                            </div>
                                        </b-card-body>
                                    </b-card>
    
                                </div><!--col-->
                            </div><!--row-->
                        </b-card-header>

                        <b-list-group flush>
                            <b-list-group-item v-for="f in master.formula" class="p-0">

                                <div class="row no-gutters pt-2">
                                    <div class="col-12 p-2 text-center text-sm-left">{{ f.name }}</div>
                                    <div class="col-12 col-md-6 col-lg-4 p-2" v-for="c in f.combination">

                                       <combination :c="c" can_fission="true"></combination>

                                    </div>
                                </div>

                            </b-list-group-item>
                        </b-list-group>

                    </b-card>

                </b-tab>

                <!--tab3-->

                <b-tab :title="$t('message.normal')" no-body>
                    
                    <b-card v-if="usage_master" no-body>

                        <b-list-group flush>
                            <b-list-group-item v-for="f in usage_master.formula" class="p-0">

                                <div class="row no-gutters">
                                    <div class="col-6 col-sm-4 p-2">

                                        <b-card no-body>
                                            <b-card-body class="p-2"
                                                :class="{'border-primary':f.upgrade, 'text-primary':f.upgrade, 'border-danger': f.downgrade, 'text-danger':f.downgrade}"
                                                :style="{backgroundImage:'url(\'images/devil/'+f.target.icon+'\')'}" 
                                                style="background-position:right;background-repeat:no-repeat;background-size:contain">
                                                <div class="font-weight-bold">
                                                    {{ getDevilName( f.target ) }}
                                                </div>
                                                <div class="small">
                                                    {{ 'G.'+f.target.grade }}
                                                    <span v-for="n in f.target.rarity">&#9733;</span>
                                                </div>
                                            </b-card-body>
                                        </b-card>

                                    </div>
                                    <div class="col-12 col-sm-8">

                                        <div class="row no-gutters">
                                            <div class="col-12 col-sm-12 col-md-12 col-lg-6 p-2" v-for="c in f.combination">
        
                                                <combination :c="c"></combination>

                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </b-list-group-item>
                        </b-list-group>
                    </b-card>

                </b-tab>

                <!--tab4-->

                <b-tab :title="$t('message.setting')" style="background:url('images/theme/berukerosu.png') no-repeat right; background-size:contain">
                
                    <div class="row">
                        <div class="col-12 py-2">
                            <div class="font-weight-bold py-2">{{ $t('message.language') }}</div>
                            <div>
                                <b-form-radio-group id="lang"
                                    buttons
                                    button-variant="outline-info"
                                    v-model="lang_value"
                                    :options="lang_options"
                                    name="lang_radio">
                                    </b-form-radio-group>
                            </div>
                        </div>
                        <div class="col-12 py-2">
                            <div class="font-weight-bold py-2">{{ $t('message.downgrade_fusion') }}</div>
                            <div>
                                <b-form-radio-group id="lang"
                                    buttons
                                    button-variant="outline-info"
                                    v-model="allow_down_grade"
                                    name="lang_radio">
                                    <b-form-radio value="0">{{ $t('message.deny') }}</b-form-radio>
                                    <b-form-radio value="1">{{ $t('message.allow') }}</b-form-radio>
                                    </b-form-radio-group>
                            </div>
                        </div>
                    </div>
                    
                </b-tab>

            </b-tabs>
        </b-card>
        <div class="small text-right">Last Updated: {{ updated_at }}</div>
    </div>

    <script id="devil-t" type="text/x-template">
        <b-card no-body>
            <b-card-body class="p-2" @click="fission(devil, true)"
                :style="{backgroundImage:'url(\'images/devil/'+devil.icon+'\')'}" 
                style="cursor:pointer;background-position:right;background-repeat:no-repeat;background-size:contain">
                <div class="font-weight-bold">
                    {{ getDevilName( devil ) }}
                </div>
                <div class="small">
                    {{ 'G.'+devil.grade }}
                    <span v-for="n in devil.rarity">&#9733;</span>
                </div>
            </b-card-body>

            <b-card-footer class="p-1">
                <b-button variant="sencondary" size="sm" @click="fusion(devil)" class="font-weight-bold">{{ $t('message.normal_fusion') }}</b-button>
                <b-button variant="warning" size="sm" @click="fission(devil, true)" class="font-weight-bold">{{ $t('message.reverse_fusion') }}</b-button>
            </b-card-footer>
        </b-card>
    </script>

    <script id="devil-list-t" type="text/x-template">
        <div class="row no-gutters">
            <div class="col-12 col-md-6 col-lg-4 p-2" v-for="devil in devils">
                <devil :devil="devil"></devil>
            </div>
        </div>
    </script>

    <script id="combination-t" type="text/x-template">
        <b-card no-body :class="{'border-primary':c.upgrade, 'border-danger':c.downgrade}">
            <div class="row no-gutters">
                <div class="col-6 p-2" v-for="devil in [c.d1,c.d2]" :class="{'text-primary':c.upgrade,'text-danger':c.downgrade}"
                    :style="{backgroundImage:'url(\'images/devil/'+devil.icon+'\')'}" style="background-position:right;background-repeat:no-repeat;background-size:contain"
                    @click="can_fission&&fission(devil)">
                        <div class="font-weight-bold">{{ getDevilName( devil ) }}</div>
                        <div class="small">G.{{ devil.grade }} <span v-for="n in devil.rarity">&#9733;</span></div>
                </div>
            </div>
            <b-card-footer class="p-1 text-right small">
                {{ c.mag==0?'NO_DATA':('&diams; '+formatPrice(c.mag)) }}
            </b-card-footer>
        </b-card>
    </script>

    <script src="js/app.js?t=180307-2"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-71606599-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-71606599-2');
</script>

</body>
</html>